# PDF Editor - 要件定義書

## 1. プロジェクト概要

### 1.1 目的
Windows/Mac両対応のWebベースPDF編集ツールを開発する。

### 1.2 ターゲットユーザー
- プレゼン資料やドキュメントのPDFを編集したいユーザー
- 複数のPDFや画像を1つのPDFに結合したいユーザー

---

## 2. 機能要件

### 2.1 PDFの読み込み・表示

| ID | 要件 | 優先度 |
|----|------|--------|
| F-001 | 既存のPDFファイルを読み込める | 必須 |
| F-002 | 左側サイドバーに全ページのサムネイルプレビューを表示 | 必須 |
| F-003 | 右側メインエリアに選択中ページの内容を表示 | 必須 |
| F-004 | サムネイルクリックでメインビューのページを切り替え | 必須 |

### 2.2 ページ挿入

| ID | 要件 | 優先度 |
|----|------|--------|
| F-005 | サイドバーへのドラッグ＆ドロップでPDFを挿入できる | 必須 |
| F-006 | サイドバーへのドラッグ＆ドロップでPNG画像を挿入できる | 必須 |
| F-007 | サイドバーへのドラッグ＆ドロップでJPEG画像を挿入できる | 必須 |
| F-008 | 挿入時、元PDFの幅・高さに合わせてリサイズする | 必須 |
| F-009 | 挿入位置をドロップ位置で指定できる | 必須 |

### 2.3 ページ削除

| ID | 要件 | 優先度 |
|----|------|--------|
| F-010 | 選択中のページをキーボードショートカットで削除できる | 必須 |
| F-011 | Windows: `Ctrl + D` で削除 | 必須 |
| F-012 | Mac: `Cmd + D` で削除 | 必須 |
| F-013 | 削除前に確認ダイアログを表示する | 任意 |

### 2.4 ページ操作（追加機能）

| ID | 要件 | 優先度 |
|----|------|--------|
| F-014 | サムネイルをドラッグしてページの順序を変更できる | 任意 |
| F-015 | ページを複製できる | 任意 |

### 2.5 出力

| ID | 要件 | 優先度 |
|----|------|--------|
| F-016 | 編集後のPDFをダウンロードできる | 必須 |
| F-017 | ファイル名を指定してダウンロードできる | 任意 |
| F-018 | ページ単体を高解像度PNG画像として保存できる | 必須 |
| F-019 | 全ページを一括で画像化してZIP保存できる | 必須 |

### 2.6 UX改善（追加機能）

| ID | 要件 | 優先度 |
|----|------|--------|
| F-020 | メインエリア（右側）へのドラッグ＆ドロップでファイルを読み込める | 必須 |
| F-021 | 起動時のメインエリアに「ファイルを開く」ボタンを表示する | 必須 |
| F-022 | ツールバーに画像保存・全保存ボタンを配置する | 必須 |

### 2.7 バイナリ分割（メール送信用）

| ID | 要件 | 優先度 |
|----|------|--------|
| F-023 | PDFを10MB単位でバイナリ分割できる | 必須 |
| F-024 | 分割ファイルをZIP形式でダウンロードできる | 必須 |
| F-025 | 受信側で`cat`コマンドで元PDFに結合できる | 必須 |

---

## 3. 非機能要件

### 3.1 クロスプラットフォーム対応

| ID | 要件 |
|----|------|
| NF-001 | Windows（Chrome, Edge, Firefox）で動作する |
| NF-002 | Mac（Chrome, Safari, Firefox）で動作する |
| NF-003 | ブラウザのみで動作（サーバー不要） |

### 3.2 パフォーマンス

| ID | 要件 |
|----|------|
| NF-004 | 50ページ程度のPDFを編集できる |
| NF-005 | PDF読み込み中はローディング表示する |

### 3.3 ユーザビリティ

| ID | 要件 |
|----|------|
| NF-006 | モダンで直感的なUI |
| NF-007 | ダークモード対応 |
| NF-008 | レスポンシブデザイン |

---

## 4. 技術要件

### 4.1 開発言語・フレームワーク

| 項目 | 選定 | 理由 |
|------|------|------|
| 言語 | TypeScript | 型安全性、保守性向上 |
| ビルドツール | Vite | 高速なビルド、モダンな開発体験 |
| スタイリング | Vanilla CSS | 柔軟性、フレームワーク非依存 |

### 4.2 PDF処理ライブラリ

| ライブラリ | 用途 |
|------------|------|
| pdf-lib | PDFの編集（ページ追加・削除・並べ替え） |
| pdf.js (pdfjs-dist) | PDFのレンダリング（プレビュー表示） |

---

## 5. 制約事項

- サーバーサイド処理は行わない（全てクライアントサイドで完結）
- 暗号化されたPDFは対象外
- 非常に大きなPDF（100MB以上）はパフォーマンス保証外

---

## 6. 用語定義

| 用語 | 説明 |
|------|------|
| サイドバー | 画面左側のページサムネイル一覧エリア |
| メインビュー | 画面右側のページ詳細表示エリア |
| ページ | PDFの1ページ単位 |
